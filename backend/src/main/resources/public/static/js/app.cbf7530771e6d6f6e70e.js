webpackJsonp([1],{IckW:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("qb6w"),n("e0XP"),n("IckW");var a=n("7+uW"),s={name:"NavBar",data:function(){return{loggedIn:!1}},created:function(){localStorage.getItem("access_token")&&(this.loggedIn=!0);var e=this;window.eventBus.$on("loggedin",function(){e.loggedIn=!0}),window.eventBus.$on("logout",function(){console.log("received logout emit event"),e.loggedIn=!1,localStorage.removeItem("access_token"),e.$router.push("/")})},methods:{doLogout:function(){window.eventBus.$emit("logout")}},computed:{isUserLoggedIn:function(){return this.loggedIn}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"navbar navbar-expand-md navbar-dark bg-dark fixed-top"},[n("div",{staticClass:"container"},[n("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e._v("TechBuzz")]),e._v(" "),e._m(0),e._v(" "),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarsExampleDefault"}},[n("ul",{staticClass:"navbar-nav mr-auto"},[n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[e._v("Home")])],1)]),e._v(" "),n("ul",{staticClass:"navbar-nav"},[e.isUserLoggedIn?n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/newlink"}},[e._v("New Link")])],1):e._e(),e._v(" "),e.isUserLoggedIn?e._e():n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[e._v("Login")])],1),e._v(" "),e.isUserLoggedIn?n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.doLogout(t)}}},[e._v("Logout")])]):e._e()])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarsExampleDefault","aria-controls":"navbarsExampleDefault","aria-expanded":"false","aria-label":"Toggle navigation"}},[t("span",{staticClass:"navbar-toggler-icon"})])}]},o={name:"App",components:{"nav-bar":n("VU/8")(s,r,!1,null,null,null).exports}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("nav-bar"),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var l=n("VU/8")(o,i,!1,function(e){n("vg9L")},null,null).exports,c=n("/ocq"),u=n("//Fk"),d=n.n(u),v=n("mtWM"),p=n.n(v).a.create({baseURL:"http://localhost:9090",timeout:3e4});a.a.prototype.$http=p,p.interceptors.request.use(function(e){var t=localStorage.getItem("access_token");return!e.headers.Authorization&&t&&(e.headers.Authorization="Bearer "+t),e}),p.interceptors.response.use(function(e){return e},function(e){if(console.log(e),401!==e.response.status)return d.a.reject(e);window.eventBus.$emit("logout"),C.push("/login")});var m={name:"Home",data:function(){return{msg:"Latest tech articles, news",links:[]}},created:function(){this.fetchLinks()},methods:{fetchLinks:function(){var e=this;p.get("api/links").then(function(t){e.links=t.data}).catch(function(e){console.log(e)})}},computed:{}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("h2",[e._v(e._s(e.msg))]),e._v(" "),e._l(e.links,function(t){return n("div",{key:t.id},[n("h5",[n("a",{attrs:{href:t.url,target:"_blank"}},[e._v(e._s(t.title))])]),e._v(" "),n("p",[e._v(e._s(t.createdOn)+" by "+e._s(t.createdUserName))])])})],2)},staticRenderFns:[]};var f=n("VU/8")(m,g,!1,function(e){n("sBjB")},"data-v-571e2c7d",null).exports,_={name:"Login",data:function(){return{credentials:{},error:""}},methods:{doLogin:function(){var e=this;p.post("auth/login",this.credentials).then(function(t){localStorage.setItem("access_token",t.data.access_token),console.log("Login successful"),window.eventBus.$emit("loggedin"),e.$router.push("/")},function(t){console.error("Login failed",t),e.error="Login failed"})}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-md-3"},[n("h2",[e._v("Login Form")]),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.doLogin(t)}}},[e.error?n("div",{staticClass:"alert alert-danger"},[e._v("\n        "+e._s(e.error)+"\n      ")]):e._e(),e._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"username"}},[e._v("UserName")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.credentials.username,expression:"credentials.username"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"Enter username"},domProps:{value:e.credentials.username},on:{input:function(t){t.target.composing||e.$set(e.credentials,"username",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"password"}},[e._v("Password")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.credentials.password,expression:"credentials.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Password"},domProps:{value:e.credentials.password},on:{input:function(t){t.target.composing||e.$set(e.credentials,"password",t.target.value)}}})]),e._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Login")])])])])},staticRenderFns:[]},w=n("VU/8")(_,h,!1,null,null,null).exports,k={name:"NewLink",data:function(){return{newLink:{},errors:[]}},methods:{addNewLink:function(e){var t=this;this.errors=[],this.newLink.title||this.errors.push("Title should not be empty"),this.newLink.url||this.errors.push("URL should not be empty"),this.errors.length>0?e.preventDefault():p.post("api/links",this.newLink).then(function(e){console.log("saved link successfully"),t.$router.push("/")},function(e){console.error("Save failed",e),e.response.data.forEach(function(e){return t.errors.push(e.message)})})}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-md-6"},[n("h2",[e._v("Create New Link")]),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.addNewLink(t)}}},[e.errors.length?n("p",{staticClass:"alert alert-danger"},[n("b",[e._v("Please correct the following error(s):")]),e._v(" "),n("ul",e._l(e.errors,function(t){return n("li",{key:t},[e._v(e._s(t))])}))]):e._e(),e._v(" "),n("div",{staticClass:"form-group"},[n("label",[e._v("Title")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newLink.title,expression:"newLink.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Title"},domProps:{value:e.newLink.title},on:{input:function(t){t.target.composing||e.$set(e.newLink,"title",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-group"},[n("label",[e._v("URL")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newLink.url,expression:"newLink.url"}],staticClass:"form-control",attrs:{type:"text",placeholder:"URL"},domProps:{value:e.newLink.url},on:{input:function(t){t.target.composing||e.$set(e.newLink,"url",t.target.value)}}})]),e._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Submit")])])])])},staticRenderFns:[]},L=n("VU/8")(k,b,!1,null,null,null).exports;a.a.use(c.a);var C=new c.a({routes:[{path:"/",name:"Home",component:f},{path:"/login",name:"Login",component:w},{path:"/newlink",name:"NewLink",component:L}]});a.a.config.productionTip=!1,window.eventBus=new a.a({}),new a.a({el:"#app",router:C,components:{App:l},template:"<App/>"})},e0XP:function(e,t){},qb6w:function(e,t){},sBjB:function(e,t){},vg9L:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.cbf7530771e6d6f6e70e.js.map